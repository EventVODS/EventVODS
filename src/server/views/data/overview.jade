extends ../layout
block vars
	-currentPage = "Data";
block content
	div.event-container(ng-app="data", ng-controller="dataList", ng-cloak)
		div.contextHead
			div.leftSide
				span.btn.lg.solid.icon(ng-click="test()") Test
				a.btn.lg.solid.icon(href="add/team", ng-show="view == 'Teams'")
					i.icon-file-add
					span New Team
				a.btn.lg.solid.icon(href="add/staff", ng-show="view == 'Staff'")
					i.icon-file-add
					span New Staff
				a.btn.lg.solid.icon(href="add/map", ng-show="view == 'Maps'")
					i.icon-file-add
					span New Map
			div.rightSide
				div.filterControl
					a(href="#", ng-click="showFilters = !showFilters") {{showFilters ? "Hide" : "Show"}} Filter Controls
				div.tabs
					div.teams(ng-click="view = 'Teams'", ng-class="view == 'Teams' ? 'active' : ''")
						i.icon-teams
						span Teams
					div.staff(ng-click="view = 'Staff'",  ng-class="view == 'Staff' ? 'active' : ''")
						i.icon-staff
						span Staff
					div.staff(ng-click="view = 'Maps'",  ng-class="view == 'Maps' ? 'active' : ''")
						i.icon-maps
						span Maps
		div.filters(ng-show="showFilters")
				input(type="text", ng-model="teams.search", placeholder="Search Teams", ng-show="view == 'Teams'")
				input(type="text", ng-model="staff.search", placeholder="Search Staff", ng-show="view == 'Staff'")
				input(type="text", ng-model="maps.search", placeholder="Search Maps", ng-show="view == 'Maps'")
		div#Teams.data(ng-show="view == 'Teams'")
			table.standard
				thead
					tr
						th.sortable(ng-class="{'sort-desc': teams.sorted('tag', 'desc'), 'sort-asc': teams.sorted('tag', 'asc')}")
							a(href="#", ng-click="teams.sortBy('tag')") Tag
						th.sortable(ng-class="{'sort-desc': teams.sorted('name', 'desc'), 'sort-asc': teams.sorted('name', 'asc')}")
							a(href="#", ng-click="teams.sortBy('name')") Name
						th Icon
						th.sortable(ng-class="{'sort-desc': teams.sorted('country', 'desc'), 'sort-asc': teams.sorted('country', 'asc')}")
							a(href="#", ng-click="teams.sortBy('country')") Country
						th
						th
				tbody
					tr(ng-repeat="team in teams.list")
						td.tag {{team.teamTag}}
						td.name {{team.teamName}}
						td.icon
							img(ng-src="/assets/images/teams/logo/{{team.teamTag}}.png")
						td.country
							img(ng-src="/assets/images/countries/{{team.teamCountry}}.png")
							|{{team.teamCountry}}
						td.edit
							a(ng-href="/data/team/{{team._id}}/edit")
								i.icon-pencil
						td.url
							a(ng-href="/data/team/{{team._id}}")
								i.icon-logout
		div#Staff.data(ng-show="view == 'Staff'")
			table.standard
				thead
					tr
						th.sortable(ng-class="{'sort-desc': staff.sorted('name', 'desc'), 'sort-asc': staff.sorted('name', 'asc')}")
							a(href="#", ng-click="staff.sortBy('name')") Name
						th.sortable(ng-class="{'sort-desc': staff.sorted('alias', 'desc'), 'sort-asc': staff.sorted('alias', 'asc')}")
							a(href="#", ng-click="staff.sortBy('alias')") Alias
						th.sortable(ng-class="{'sort-desc': staff.sorted('country', 'desc'), 'sort-asc': staff.sorted('country', 'asc')}")
							a(href="#", ng-click="staff.sortBy('country')") Country
						th
						th
				tbody
					tr(ng-repeat="staff in staff.list")
						td.name {{staff.casterName}}
						td.alias {{staff.casterAlias}}
						td.country
							img(ng-src="/assets/images/countries/{{team.teamCountry}}.png")
							|{{staff.casterCountry}}
						td.edit
							a(ng-href="/data/staff/{{staff._id}}/edit")
								i.icon-pencil
						td.url
							a(ng-href="/data/staff/{{staff._id}}")
								i.icon-logout
		span(ng-show="(teams.list == null || teams.list.length == 0) && view == 'Teams'") No data matches those criteria.
		span(ng-show="(staff.list == null || staff.list.length == 0) && view == 'Staff'") No data matches those criteria.
		span(ng-show="(maps.list == null || maps.list.length == 0) && view == 'Maps'") No data matches those criteria.
		div.pagination(ng-show="teams.pages > 1 && view =='Teams' ")
			a.btn(ng-show="teams.page > 1", ng-click="teams.prevPage()") Prev Page
			| Page {{teams.page}} of {{teams.pages}}
			a.btn(ng-show="teams.pages > 1 && teams.page < teams.pages", ng-click="teams.nextPage()") Next Page
		div.pagination(ng-show="staff.pages > 1 && view =='Staff' ")
			a.btn(ng-show="staff.page > 1", ng-click="staff.prevPage()") Prev Page
			| Page {{staff.page}} of {{staff.pages}}
			a.btn(ng-show="staff.pages > 1 && staff.page < staff.pages", ng-click="staff.nextPage()") Next Page
		div.pagination(ng-show="maps.pages > 1 && view =='Maps' ")
			a.btn(ng-show="maps.page > 1", ng-click="maps.prevPage()") Prev Page
			| Page {{maps.page}} of {{maps.pages}}
			a.btn(ng-show="maps.pages > 1 && maps.page < maps.pages", ng-click="maps.nextPage()") Next Page
		

block scripts
	script(src='/assets/js/app/services/data.js')
	script(src='/assets/js/app/controllers/dataList.js')
